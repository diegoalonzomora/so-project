<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cloudbeds ‚Äî ¬°Reserva confirmada!</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <style>
    @media print {
      .header, .action-buttons { display: none !important; }
      body { background: white !important; }
      .factura-container { box-shadow: none !important; }
    }
    
    .factura-container { max-width: 900px; margin: 0 auto; }
    
    .factura-header { 
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); 
      color: white; 
      padding: 40px; 
      border-radius: 12px 12px 0 0;
      box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
    }
    
    .factura-header h2 { 
      margin: 0 0 8px; 
      font-size: 2rem; 
      font-weight: 700;
    }
    
    .factura-meta {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(255,255,255,0.2);
      font-size: 0.95rem;
      opacity: 0.95;
    }
    
    .factura-body { 
      background: white; 
      padding: 40px; 
      border: 1px solid #e5e7eb; 
      border-top: none;
      border-radius: 0 0 12px 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    
    .info-section {
      margin-bottom: 35px;
      padding-bottom: 25px;
      border-bottom: 2px solid #f3f4f6;
    }
    
    .info-section:last-of-type {
      border-bottom: none;
    }
    
    .info-section h3 { 
      margin: 0 0 20px; 
      font-size: 1.1rem;
      font-weight: 600;
      color: #374151;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .info-section h3::before {
      content: '';
      display: inline-block;
      width: 4px;
      height: 20px;
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      border-radius: 2px;
    }
    
    .factura-row { 
      display: flex; 
      justify-content: space-between; 
      padding: 14px 0; 
      border-bottom: 1px solid #f3f4f6;
      align-items: center;
    }
    
    .factura-row:last-child { border-bottom: none; }
    
    .factura-row .label {
      color: #6b7280;
      font-size: 0.95rem;
    }
    
    .factura-row .value {
      color: #111827;
      font-weight: 600;
      text-align: right;
    }
    
    .servicios-list {
      background: #f9fafb;
      padding: 15px;
      border-radius: 8px;
      margin-top: 10px;
    }
    
    .servicio-item-detalle {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .servicio-item-detalle:last-child {
      border-bottom: none;
    }
    
    .factura-total { 
      font-size: 1.4rem; 
      font-weight: 700; 
      background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
      padding: 25px; 
      border-radius: 10px; 
      margin-top: 30px;
      border: 2px solid #d1d5db;
    }
    
    .factura-total .total-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .factura-total .total-amount {
      color: #6366f1;
      font-size: 2rem;
    }
    
    .payment-info {
      background: #fefce8;
      border: 1px solid #fde047;
      padding: 20px;
      border-radius: 10px;
      margin-top: 25px;
    }
    
    .payment-info .factura-row {
      border-bottom: 1px solid #fde047;
    }
    
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
    }
    
    .status-badge::before {
      content: '‚óè';
      font-size: 1.2rem;
    }
    
    .status-confirmada {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-pendiente {
      background: #fef3c7;
      color: #92400e;
    }
    
    .status-cancelada {
      background: #fee2e2;
      color: #991b1b;
    }
    
    .action-buttons { 
      display: flex; 
      gap: 12px; 
      margin-top: 30px; 
      flex-wrap: wrap; 
    }
    
    .action-buttons .btn {
      flex: 1;
      min-width: 200px;
      justify-content: center;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    @media (max-width: 640px) {
      .factura-header { padding: 25px 20px; }
      .factura-body { padding: 25px 20px; }
      .factura-row { flex-direction: column; gap: 8px; align-items: flex-start; }
      .factura-row .value { text-align: left; }
      .factura-meta { flex-direction: column; gap: 10px; }
      .action-buttons .btn { min-width: 100%; }
      .factura-total .total-amount { font-size: 1.6rem; }
    }
  </style>
</head>
<body>
  <header class="header">
    <nav class="nav">
      <div class="brand"><div class="brand-badge">CB</div>Cloudbeds</div>
      <div class="cta">
        <a class="btn btn-outline" href="../index.html">Inicio</a>
      </div>
    </nav>
  </header>

  <main class="section container" style="padding-top:120px">
    <div class="factura-container">
      <!-- Mensaje de √©xito -->
      <article class="card" style="text-align:center; margin-bottom: 30px">
        <svg width="80" height="80" viewBox="0 0 24 24" fill="none" style="margin-inline:auto; display:block">
          <circle cx="12" cy="12" r="10" fill="url(#g)" />
          <path d="M7 12.5l3 3 7-7" stroke="#1b1200" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"/>
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="24" y2="24">
              <stop offset="0%" stop-color="#10b981" />
              <stop offset="100%" stop-color="#34d399" />
            </linearGradient>
          </defs>
        </svg>
        <h1 style="margin:14px 0 6px">¬°Reserva Confirmada!</h1>
        <p class="muted">Tu reserva ha sido registrada exitosamente. A continuaci√≥n encontrar√°s los detalles y tu boleta de pago.</p>
      </article>

      <!-- Factura/Boleta -->
      <div class="factura-header">
        <h2>Boleta de Pago</h2>
        <div class="factura-meta">
          <div>
            <strong>Reserva N.¬∫</strong> <span id="idReserva">‚Äî</span>
          </div>
          <div>
            <strong>Factura N.¬∫</strong> <span id="idFactura">‚Äî</span>
          </div>
          <div>
            <strong>Fecha:</strong> <span id="fechaEmision">‚Äî</span>
          </div>
        </div>
      </div>

      <div class="factura-body">
        <div id="loadingFactura" style="text-align: center; padding: 20px;">
          <p class="muted">Cargando detalles...</p>
        </div>

        <div id="facturaContent" style="display: none;">
          <!-- Informaci√≥n del Hotel y Cliente -->
          <div class="info-section">
            <h3>üìç Informaci√≥n de la Reserva</h3>
            <div class="factura-row">
              <span class="label">Hotel</span>
              <span class="value" id="nombreHotel">‚Äî</span>
            </div>
            <div class="factura-row">
              <span class="label">Habitaci√≥n</span>
              <span class="value" id="tipoHabitacion">‚Äî</span>
            </div>
            <div class="factura-row">
              <span class="label">Ubicaci√≥n</span>
              <span class="value" id="ubicacionHotel">‚Äî</span>
            </div>
          </div>

          <!-- Cliente -->
          <div class="info-section">
            <h3>üë§ Datos del Cliente</h3>
            <div class="factura-row">
              <span class="label">Nombre Completo</span>
              <span class="value" id="nombreCliente">‚Äî</span>
            </div>
            <div class="factura-row">
              <span class="label">Documento</span>
              <span class="value" id="documentoCliente">‚Äî</span>
            </div>
            <div class="factura-row">
              <span class="label">Correo Electr√≥nico</span>
              <span class="value" id="correoCliente">‚Äî</span>
            </div>
          </div>

          <!-- Fechas -->
          <div class="info-section">
            <h3>üìÖ Fechas de Estancia</h3>
            <div class="factura-row">
              <span class="label">Check-in</span>
              <span class="value" id="fechaEntrada">‚Äî</span>
            </div>
            <div class="factura-row">
              <span class="label">Check-out</span>
              <span class="value" id="fechaSalida">‚Äî</span>
            </div>
            <div class="factura-row">
              <span class="label">Total de Noches</span>
              <span class="value" id="numNoches">‚Äî</span>
            </div>
          </div>

          <!-- Desglose de Costos -->
          <div class="info-section">
            <h3>üí∞ Desglose de Costos</h3>
            <div id="costoHabitacion" class="factura-row">
              <span class="label">Alojamiento (<span id="nochesCount">0</span> noches)</span>
              <span class="value" id="precioHabitacion">$0.00</span>
            </div>
            <div id="serviciosContainer"></div>
            <div id="descuentoRow" class="factura-row" style="display: none">
              <span class="label">Descuento Aplicado</span>
              <span class="value" id="descuentoMonto" style="color: #10b981; font-weight: 700">-$0.00</span>
            </div>
          </div>

          <!-- Total -->
          <div class="factura-total">
            <div class="total-row">
              <span>TOTAL PAGADO</span>
              <span id="montoTotal" class="total-amount">$0.00</span>
            </div>
          </div>

          <!-- Informaci√≥n de Pago -->
          <div class="payment-info">
            <h3 style="margin: 0 0 15px; font-size: 1rem; color: #92400e">üí≥ Informaci√≥n de Pago</h3>
            <div class="factura-row">
              <span class="label">M√©todo de Pago</span>
              <span class="value" id="metodoPago">‚Äî</span>
            </div>
            <div class="factura-row">
              <span class="label">Fecha de Pago</span>
              <span class="value" id="fechaPago">‚Äî</span>
            </div>
            <div class="factura-row" style="border: none">
              <span class="label">Estado de Reserva</span>
              <span id="estadoReserva" class="status-badge status-confirmada">Confirmada</span>
            </div>
          </div>

          <!-- Botones de Acci√≥n -->
          <div class="action-buttons">
            <button id="imprimirBtn" class="btn btn-primary" onclick="window.print()">üñ®Ô∏è Imprimir Boleta</button>
            <button id="modificarBtn" class="btn btn-outline">‚úèÔ∏è Modificar Servicios</button>
            <button id="cancelarBtn" class="btn btn-outline" style="color: #dc2626; border-color: #dc2626;">‚ùå Cancelar Reserva</button>
          </div>
        </div>

        <div id="errorFactura" style="display: none; text-align: center; padding: 20px;">
          <p style="color: #dc2626;">Error al cargar la factura. Por favor, contacta con soporte.</p>
        </div>
      </div>
    </div>

    <!-- Modal para modificar servicios -->
    <div id="modalServicios" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
      <div class="card" style="max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;">
        <h3 style="margin: 0 0 15px">Modificar Servicios Adicionales</h3>
        <div id="serviciosModificar"></div>
        <div style="display: flex; gap: 10px; margin-top: 20px; justify-content: flex-end;">
          <button id="cancelarModificarBtn" class="btn btn-outline">Cancelar</button>
          <button id="guardarServiciosBtn" class="btn btn-primary">Guardar Cambios</button>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <div class="container foot">
      <div class="brand" style="gap:8px"><div class="brand-badge">CB</div>Cloudbeds</div>
      <small>¬© <span id="year"></span> Cloudbeds.</small>
    </div>
  </footer>

  <script src="app.js"></script>
</body>
</html>
